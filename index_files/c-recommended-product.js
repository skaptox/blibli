(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"3uMB":function(e,t,n){},"5uPT":function(e,t,n){"use strict";n.r(t);var i=n("nctm"),o=n("cdMV");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);n("GN3S");var s=n("KHd+"),c=Object(s.a)(o.default,i.a,i.b,!1,null,"4ea61093",null);t.default=c.exports},GN3S:function(e,t,n){"use strict";var i=n("3uMB");n.n(i).a},QZCE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("L2JU"),s=n("tDsd"),c=(i=n("0PmP"))&&i.__esModule?i:{default:i};t.default={name:"RecommendedProduct",components:{ProductCard:function(){return n.e(20).then(n.bind(null,"yZkf"))},LoadingAnimation:function(){return n.e(18).then(n.bind(null,"cS1g"))}},data:function(){return{fetchedPages:[],lastTotalProduct:0,startX:0,scrollLeft:0,isMouseDown:!1,oldScroll:0,visibleLoadAnimation:!1,visibleLoadButton:!1,recommendationData:{name:"RECOMMENDED",title:"Produk Rekomendasi",product:[],pages:0,doneFetch:!1},skuTracked:[]}},mixins:[c.default],computed:o({},(0,r.mapGetters)(["infiniteRecommendations","isMobile","bestPriceProduct"]),{hasRecommendation:function(){return this.infiniteRecommendations.length},productSections:function(){var e=this,t=this.bestPriceProduct.map(function(t){var n=e.content(t);return{name:n.title,title:n.title,product:n.products,pages:0,doneFetch:!1}});return[this.recommendationData].concat(t)},recommendationTabItems:function(){return this.productSections.filter(function(e){return e.product&&e.product.length>0})},currentSelected:function(){var e=this;return this.productSections.find(function(t){return t.name===e.selectedTab})||{}},currentPage:function(){return this.currentSelected.pages},productsList:function(){return this.currentSelected.product},firstNonEmptyProduct:function(){return this.recommendationTabItems[0]||{}},recParam:function(){return this.$route.query.homeRec},selectedTab:function(){var e=this.hasRecommendation?"RECOMMENDED":this.firstNonEmptyProduct.name;return this.recParam||e},checkPages:function(){return this.fetchedPages.indexOf(this.currentPage)>-1},doneFetch:function(){return this.recommendationData.doneFetch},refTab:function(){return this.$refs.recommendedTab.$el},isDefaultRecommendation:function(){return"RECOMMENDED"===this.selectedTab},shouldAutoLoadProduct:function(){return this.currentPage%3!=0},stickyStartRef:function(){return this.$refs.stickyStart},mouseListeners:function(){return{touchmove:this.handleScroll,mousedown:this.mouseDownListener,mousemove:this.mouseMoveListener,mouseup:this.handleMouseLeave,mouseleave:this.handleMouseLeave}}}),methods:o({},(0,r.mapActions)(["getInfiniteRecommendations","getHomepageComponent"]),{changeSelected:function(e){var t,n,i;this.$router.replace({query:(t={},n="homeRec",i=e,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t)}),"RECOMMENDED"!==this.selectedTab?(this.visibleLoadAnimation=!1,this.visibleLoadButton=!1):0===this.currentPage&&this.getMoreProducts(),this.trackButton(e),window.scrollTo(0,this.stickyStartRef.offsetTop-90)},scrollingToTop:function(){return 0!==window.scrollY&&window.scrollY<this.oldScroll},getFooter:function(){var e=this.isMobile?".footer__mobile":".footer";return document.querySelector(e)||{}},footerHeight:function(){return this.getFooter().clientHeight||0},updateLoaderElements:function(){this.recommendationData.doneFetch&&(this.visibleLoadAnimation=!1,this.visibleLoadButton=!1)},getDoc:function(){return window.document},getDocElement:function(){var e=this.getDoc();return e.documentElement||e.body},getDocScrollTop:function(){return this.getDocElement().scrollTop},getTotalHeight:function(){return this.getDocScrollTop()+window.innerHeight},getBodyHeight:function(){return document.body.offsetHeight-this.footerHeight()},getBodyHeightAdjusted:function(){return this.getBodyHeight()-150},isAtBottomOfWindow:function(){return this.getTotalHeight()>=this.getBodyHeightAdjusted()},hasMoreProducts:function(){return!this.checkPages&&!this.doneFetch&&this.isDefaultRecommendation&&this.isAtBottomOfWindow()},handleScroll:function(){this.updateLoaderElements(),this.hasMoreProducts()&&(this.shouldAutoLoadProduct?(this.visibleLoadAnimation=!0,this.getMoreProducts()):this.visibleLoadButton=!0)},updateCurrentSelectedDoneFetch:function(){this.recommendationData.product.length===this.lastTotalProduct&&(this.recommendationData.doneFetch=!0)},handleFetchSuccess:function(){++this.recommendationData.pages,this.recommendationData.product=this.infiniteRecommendations,this.updateCurrentSelectedDoneFetch(),this.lastTotalProduct=this.recommendationData.product.length,this.visibleLoadAnimation=!1},content:function(e){return e.parameters.find(function(e){return"PRODUCTSET"===e.type})||{}},loadMoreProducts:function(){this.getMoreProducts(),this.visibleLoadButton=!1,this.visibleLoadAnimation=!0},getMoreProducts:function(){var e=this.isMobile?"mobile_web":"desktop";this.getInfiniteRecommendations({page:this.currentPage,placement:e,success:this.handleFetchSuccess}),this.fetchedPages.push(this.recommendationData.pages)},handleMouseLeave:function(){this.isMouseDown=!1},mouseDownListener:function(e){this.isMouseDown=!0,this.startX=e.pageX,this.scrollLeft=this.refTab.scrollLeft},mouseMoveListener:function(e){if(this.isMouseDown){var t=(e.pageX-this.startX)*this.getScrollRatio();this.refTab.scrollLeft=this.scrollLeft-t}},getScrollRatio:function(){return this.refTab.scrollWidth/this.refTab.clientWidth},attachMouseHandlers:function(){var e=this;Object.keys(this.mouseListeners).forEach(function(t){e.refTab.addEventListener(t,e.mouseListeners[t])})},removeMouseHandlers:function(){var e=this;Object.keys(this.mouseListeners).forEach(function(t){e.refTab.removeEventListener(t,e.mouseListeners[t])})},trackLoad:function(e){var t=this,n=e.product,i=e.idx,o=this.trackDevice(),r=String(i+1),c=String("Product "+r);if(this.isDefaultRecommendation){if(this.isSkuTracked(n.productSku))return;var a=this.selectedTab,d=a.charAt(0)+a.substring(1),u=this.validatePageNumberForTracker(n.page);setTimeout(function(){(0,s.trackImpressionsEvent)({event:"recommendationProductImpression",eventSection:{id:o[0]+"-"+a+"-product-section",name:o[1]+" "+d+" Product"},data:[{name:n.name||c,id:n.productSku||"",price:n.price.offered.replace(/[a-z ,.]/gi,""),brand:n.brand||"",category:"",variant:"",list:t.currentSelected.title,position:r,strategyUsed:n.strategyId||"",strategyMessageUsed:n.strategyMessageUsed.messageId||n.strategyMessageUsed.messageEn||"",placement:n.placement.placementId||"",productId:n.id||"",productCode:n.productSku||"",productSku:n.productSku||"",dimension55:"Retail",dimension62:"Recommendation",page:u}]}),t.addSku(n.productSku)},1e3)}else this.isSkuTracked(n.sku)||((0,s.trackImpressionsEvent)({event:"productImpressionRetail",eventSection:{id:o[0]+"-bestprice-product-section",name:o[1]+" Bestprice Product"},data:[{name:n.name||c,id:n.sku,price:n.price.offerValue,brand:n.brand||"",category:n.category||"",variant:n.variant||"",list:this.currentSelected.title,position:r,dimension55:"Retail",dimension62:"Normal"}]}),this.addSku(n.sku))},trackClick:function(e,t){var n=this.trackDevice(),i=this.selectedTab.toLowerCase(),o=i.charAt(0).toUpperCase()+i.substring(1),r=String(t+1),c=String("product "+r),a=this.validatePageNumberForTracker(e.page);this.isDefaultRecommendation?(0,s.trackClickEvent)({event:"recommendationProductClick",eventSection:{id:n[0]+"-"+i+"-product-section",name:n[1]+" "+o+" Product"},actionField:{list:this.currentSelected.title},data:[{name:e.name||c,id:e.productSku||"",price:e.price.offered.replace(/[a-z ,.]/gi,""),brand:e.brand||"",category:"",variant:"",list:this.currentSelected.title,position:r,strategyUsed:e.strategyId||"",strategyMessageUsed:e.strategyMessageUsed.messageId||e.strategyMessageUsed.messageEn||"",placement:e.placement.placementId||"",productId:e.id||"",productCode:e.productSku||"",productSku:e.productSku||"",dimension55:"Retail",dimension62:"Recommendation",page:a}]}):(0,s.trackClickEvent)({event:"productClickRetail",eventSection:{id:n[0]+"-bestprice-product-section",name:n[1]+" Bestprice Product"},actionField:{list:this.currentSelected.title},data:[{name:e.name,id:e.sku,price:e.price.offerValue,brand:e.brand||"",category:e.category||"",variant:e.variant||"",list:this.currentSelected.title,position:r,dimension55:"Retail",dimension62:"Normal"}]})},addSku:function(e){this.skuTracked.includes(e)||this.skuTracked.push(e)},isSkuTracked:function(e){return this.skuTracked.includes(e)},validatePageNumberForTracker:function(e){return e?String(e+1):String(e=1)},trackButton:function(e){(0,s.trackButtonIconEvent)({event:"buttonIconClick",pageType:"retail-home",eventDetails:{category:"retail-home",action:"buttonIconClick",label:"click-product-set/"+e}})}}),mounted:function(){window.addEventListener("scroll",this.handleScroll),this.attachMouseHandlers(),this.getHomepageComponent({block:"BEST_PRICE_PRODUCTS",display:this.isMobile?"mobile":"normal"})},created:function(){this.getMoreProducts()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),this.removeMouseHandlers()}}},cdMV:function(e,t,n){"use strict";n.r(t);var i=n("QZCE"),o=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t.default=o.a},nctm:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"stickyStart",staticClass:"recommended-product"},[n("BliCard",{ref:"recommendedTab",staticClass:"recommended-product__nav b-overflow-x",attrs:{id:"recommended-tab"}},e._l(e.recommendationTabItems,function(t,i){return n("div",{key:t.name+"-"+i,staticClass:"recommended-product__nav__item",class:{"recommended-product__nav__item--selected":e.selectedTab===t.name},on:{click:function(n){e.changeSelected(t.name)}}},[e._v("\n      "+e._s(t.title)+"\n    ")])})),e._v(" "),n("div",{},e._l(e.recommendationTabItems,function(t,i){return n("div",{key:t.title+"-"+i},[e.selectedTab===t.name?n("div",{staticClass:"product-list"},[e._l(e.productsList,function(t,i){return n("BliCard",{directives:[{name:"observe",rawName:"v-observe",value:{handler:e.trackLoad,payload:{product:t,idx:i}},expression:"{handler: trackLoad, payload: {product, idx} }"}],key:t.id+"-"+i,staticClass:"blu-product",nativeOn:{click:function(n){e.trackClick(t,i)}}},[n("ProductCard",{attrs:{product:t}})],1)}),e._v(" "),n("div",{staticClass:"wedge"}),e._v(" "),n("div",{staticClass:"wedge"}),e._v(" "),n("div",{staticClass:"wedge"}),e._v(" "),n("div",{staticClass:"wedge"}),e._v(" "),n("div",{staticClass:"wedge"}),e._v(" "),n("div",{staticClass:"wedge"})],2):e._e()])})),e._v(" "),e.visibleLoadAnimation&&!e.doneFetch?n("LoadingAnimation"):e._e(),e._v(" "),e.visibleLoadButton&&!e.doneFetch?n("div",{staticClass:"recommended-product__load-more"},[n("BliButton",{attrs:{outline:"",color:"secondary"},on:{click:function(t){e.loadMoreProducts()}}},[e._v("\n      "+e._s(e.$t("app.home.infiniteScroll.loadMore"))+"\n    ")])],1):e._e()],1)},o=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})}}]);